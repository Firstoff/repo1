{
    "version": "https://jsonfeed.org/version/1",
    "title": "Cyberflat.ru",
    "description": "",
    "home_page_url": "https://cyberflat.ru",
    "feed_url": "https://cyberflat.ru/feed.json",
    "user_comment": "",
    "author": {
        "name": "Korchagin"
    },
    "items": [
        {
            "id": "https://cyberflat.ru/pominutnaya-statistika-zagruzki-cpu-za-poslednie-255-minut/",
            "url": "https://cyberflat.ru/pominutnaya-statistika-zagruzki-cpu-za-poslednie-255-minut/",
            "title": "поминутная статистика загрузки цпу за последние 255 минут",
            "summary": "DECLARE @ts BIGINT; DECLARE @lastNmin TINYINT; SET @lastNmin =255; SELECT @ts = (SELECT cpu_ticks / ( cpu_ticks / ms_ticks ) FROM sys.dm_os_sys_info); SELECT TOP(@lastNmin) Dateadd(ms, -1 * ( @ts - [timestamp] ), Getdate())AS [EventTime], sqlprocessutilization AS [SQL Server Utilization], 100 - systemidle - sqlprocessutilization AS&hellip;",
            "content_html": "<pre class=\"line-numbers  language-html\"><code>DECLARE @ts BIGINT;\n\nDECLARE @lastNmin TINYINT;\n\nSET @lastNmin =255;\n\nSELECT @ts = (SELECT cpu_ticks / ( cpu_ticks / ms_ticks )\n\nFROM sys.dm_os_sys_info);\n\nSELECT TOP(@lastNmin) Dateadd(ms, -1 * ( @ts - [timestamp] ), Getdate())AS\n\n[EventTime],\n\nsqlprocessutilization AS\n\n[SQL Server Utilization],\n\n100 - systemidle - sqlprocessutilization AS\n\n[Other Process CPU_Utilization],\n\nsystemidle AS\n\n[System Idle]\n\nFROM (SELECT\n\nrecord.value('(./Record/@id)[1]', 'int') AS record_id,\n\nrecord.value('(./Record/SchedulerMonitorEvent/SystemHealth/SystemIdle)[1]', 'int') AS [SystemIdle],\n\nrecord.value('(./Record/SchedulerMonitorEvent/SystemHealth/ProcessUtilization)[1]', 'int')AS [SQLProcessUtilization],\n\n[timestamp]\n\nFROM (SELECT[timestamp],\n\nCONVERT(XML, record) AS [record]\n\nFROM sys.dm_os_ring_buffers\n\nWHERE ring_buffer_type = N'RING_BUFFER_SCHEDULER_MONITOR'\n\nAND record LIKE'%%')AS x)AS y\n\nORDER BY record_id DESC;</code></pre>",
            "author": {
                "name": "Korchagin"
            },
            "tags": [
                   "sql"
            ],
            "date_published": "2023-04-30T17:27:39+03:00",
            "date_modified": "2023-04-30T17:27:56+03:00"
        },
        {
            "id": "https://cyberflat.ru/maxdop/",
            "url": "https://cyberflat.ru/maxdop/",
            "title": "MAXDOP",
            "summary": "sp_configure &#39;show advanced options&#39;, 1; go reconfigure; go sp_configure &#39;max degree of parallelism&#39;, 4; go reconfigure; go",
            "content_html": "<pre><code class=\"language-sql\">sp_configure &#39;show advanced options&#39;, 1;\ngo\nreconfigure;\ngo\nsp_configure &#39;max degree of parallelism&#39;, 4;\ngo\nreconfigure;\ngo\n</code></pre>\n",
            "author": {
                "name": "Korchagin"
            },
            "tags": [
                   "sql"
            ],
            "date_published": "2023-04-18T00:15:17+03:00",
            "date_modified": "2023-04-30T17:20:02+03:00"
        },
        {
            "id": "https://cyberflat.ru/ishchem-bazu-dannyh-iz-svoego-spiska-i-eyo-razmer-v-spiske-serverov/",
            "url": "https://cyberflat.ru/ishchem-bazu-dannyh-iz-svoego-spiska-i-eyo-razmer-v-spiske-serverov/",
            "title": "ищем базу данных из своего списка и её размер в списке серверов",
            "summary": "```powershell Remove-Variable * -ErrorAction SilentlyContinue # # Этот код ищет базы данных из своего списка и их размер в списке серверов # $x = 1 #read-host \"\" $serverList = Get-Content \"ServerList.txt\" $databaseList = Get-Content \"DatabaseList.txt\" $query = \"select count(name) from sysdatabases where name = '{0}'\"&hellip;",
            "content_html": "<p><code>```powershell</code></p>\n<p><code>Remove-Variable * -ErrorAction SilentlyContinue</code><br><br><code>#</code><br><code># Этот код ищет базы данных из своего списка и их размер в списке серверов</code><br><code>#</code><br><code>$x = 1</code><br><code>#read-host \"\"</code><br><br><code>$serverList = Get-Content \"ServerList.txt\"</code><br><code>$databaseList = Get-Content \"DatabaseList.txt\"</code><br><code>$query = \"select count(name) from sysdatabases where name = '{0}'\"</code><br><code>$queryexistbase = \"SELECT COUNT(*) as [Count] FROM sys.objects\"</code><br><code>#$querydbsizeGB = \"SELECT SUM(CAST(size / 128.0 /1024 AS DECIMAL(17,2))) AS [Размер в GB] FROM sys.database_files\"</code><br><code>$querydbsizeMB = \"SELECT SUM(CAST(size / 128.0 AS DECIMAL(17,2))) AS [Размер в MB] FROM sys.database_files\"</code><br><code>$outputPath = \"Output.log\"</code><br><code>$backupDirectory = \"C:\\backup\"</code><br><br><code>foreach ($server in $serverList) {</code><br><code>    foreach ($dbname in $databaseList) {</code><br><code>        $queryDb = $query -f $dbname</code><br><code>        $SQLInstances = $server</code><br><code>        try {</code><br><code>            if ($(Invoke-SQLCmd -ServerInstance $SQLInstances -Database master -Query $queryDb -QueryTimeout 3600 -Verbose -ErrorAction Stop).Column1 -gt 0) {</code><br><code>                $results = Invoke-Sqlcmd -ServerInstance $server -Database $dbname -Query $queryexistbase -ErrorAction SilentlyContinue</code><br><code>                $dbSize = Invoke-Sqlcmd -ServerInstance $server -Database $dbname -Query $querydbsizeMB -ErrorAction SilentlyContinue</code><br><code>                if ($results) {</code><br><code>                    $count = $results.Count</code><br><code>                } else {</code><br><code>                    $count = 0</code><br><code>                }</code><br><br><code>                # Создать резервную копию базы данных</code><br><code>                $backupFile = \"{0}\\{1}_do_{2}.bak\" -f $backupDirectory, $dbname, (Get-Date).AddDays($x).ToString(\"ddMMyyyy\")</code><br><code>                Backup-SqlDatabase -ServerInstance $server -Database $dbname -BackupFile $backupFile</code><br><br><code>                Write-Output \"$server,$dbname,$($dbsize.'Размер в MB')\"</code><br><code>                #Write-host 'Размер SQL базы в MB' = $dbsize.'Размер в MB' # обрати внимание, здесь значение из массива, а не переменная и текст !!!!</code><br><code>                #Write-host 'Размер SQL базы в GB' = $dbsize.'Размер в GB'</code><br><code>                if ($count) {</code><br><code>                    Add-Content -Path $outputPath -Value \"$server,$dbname,$($dbsize.'Размер в MB')\"</code><br><code>                    Add-Content -Path $outputPath -Value \"$(Get-Date -Format 'dd-MM-yyyy HH:mm'),$server,$dbname,$($dbsize.'Размер в MB')\"</code><br><br><code>                } else {</code><br><code>                    Add-Content -Path $outputPath -Value \"$server,$($dbsize.'Размер в MB')\"</code><br><code>                }</code><br><code>            } else {</code><br><code>                Write-Warning \"Database ${dbname} not found on server ${server}\"</code><br><code>                Add-Content -Path $outputPath -Value \"Database ${dbname} not found on server ${server}\"</code><br><code>            }</code><br><code>        } catch {</code><br><code>            Write-Error \"Error connecting to database ${dbname} on server ${server}: $_\" -ErrorAction Continue</code><br><code>            Add-Content -Path $outputPath -Value \"Error connecting to database ${dbname} on server ${server}: $_\"</code><br><code>        }</code><br><code>    }</code><br><code>}</code><br><br><code>#Write-Host \"Job Done!\" -ForegroundColor Green -BackgroundColor Black</code><br><code>Get-Content \"example.txt\" | ForEach-Object {</code><br><code>    $_.ToCharArray() | ForEach-Object {</code><br><code>        Write-Host -NoNewline $_  -ForegroundColor Green -BackgroundColor Black</code><br><code>        Start-Sleep -Milliseconds 50</code><br><code>    }</code><br><code>}</code></p>\n<p> </p>",
            "author": {
                "name": "Korchagin"
            },
            "tags": [
                   "powershell"
            ],
            "date_published": "2023-04-18T00:09:26+03:00",
            "date_modified": "2023-04-30T17:19:01+03:00"
        },
        {
            "id": "https://cyberflat.ru/pod-znamenem-nebes/",
            "url": "https://cyberflat.ru/pod-znamenem-nebes/",
            "title": "Под знаменем небес",
            "summary": "Дата выхода: 28.04.22 США. FX. Hulu. Сериал «Под знаменем небес» снят по одноименному бестселлеру американского писателя и журналиста Джона Кракауэра. В свою очередь, роман описывает реальные события, произошедшие в штате Юта в 1984 году. Набожный детектив-мормон Джеб Пайр расследует жестокое преступление: два брата убили жену&hellip;",
            "content_html": "<div class=\"gallery-wrapper\"><div class=\"gallery\"  data-is-empty=\"false\" data-translation=\"Add images\" data-columns=\"3\">\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/3/gallery/7783776a8f7d43135b811b2aec9f07ab.jpg\" data-size=\"1200x800\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/3/gallery/7783776a8f7d43135b811b2aec9f07ab-thumbnail.jpg\" alt=\"\" width=\"768\" height=\"512\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/3/gallery/w1500_50518941.jpg\" data-size=\"1500x1000\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/3/gallery/w1500_50518941-thumbnail.jpg\" alt=\"\" width=\"768\" height=\"512\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/3/gallery/w1500_50489227.jpg\" data-size=\"1500x1000\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/3/gallery/w1500_50489227-thumbnail.jpg\" alt=\"\" width=\"768\" height=\"512\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/3/gallery/IMG_0335-2048x1366.jpg\" data-size=\"2048x1366\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/3/gallery/IMG_0335-2048x1366-thumbnail.jpg\" alt=\"\" width=\"768\" height=\"512\"></a></figure>\n</div></div>\n<p>Дата выхода: 28.04.22 США. FX. Hulu.</p>\n<p>Сериал «Под знаменем небес» снят по одноименному бестселлеру американского писателя и журналиста Джона Кракауэра. В свою очередь, роман описывает реальные события, произошедшие в штате Юта в 1984 году.</p>\n<p>Набожный детектив-мормон Джеб Пайр расследует жестокое преступление: два брата убили жену и маленькую дочку своего третьего младшего брата. Обвиняемые утверждают, что выполняли приказ Бога. Выясняется, что братья состоят в религиозной группировке «Школа пророков» и следуют догматам Движения Святых последних дней, которые среди прочего включают в себя полигамию и убеждение в том, что истинные верующие могут напрямую общаться с богом. Чем глубже детектив Пайр погружается в расследование, тем большему сомнению подвергается его собственная вера.</p>\n<p>Сериал достаточно мощно начинается, хотя немного затянуто, но тем не менее по напряженности не уступит \"Настоящим детективам\". Эндрю Гарфилд в роли детектива Пайра.</p>\n<p> </p>",
            "image": "https://cyberflat.ru/media/posts/3/le0afd642f1cffb78b84o-2.png",
            "author": {
                "name": "Korchagin"
            },
            "tags": [
                   "serials",
                   "hulu"
            ],
            "date_published": "2023-04-17T23:24:56+03:00",
            "date_modified": "2023-04-17T23:54:10+03:00"
        },
        {
            "id": "https://cyberflat.ru/eshche-nemnogo-kotov-iz-ai/",
            "url": "https://cyberflat.ru/eshche-nemnogo-kotov-iz-ai/",
            "title": "Еще немного котов из AI",
            "content_html": "<div class=\"gallery-wrapper\"><div class=\"gallery\"  data-is-empty=\"false\" data-translation=\"Add images\" data-columns=\"3\">\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/2/gallery/kandinsky-download-1681320497749.png\" data-size=\"767x767\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/2/gallery/kandinsky-download-1681320497749-thumbnail.png\" alt=\"\" width=\"767\" height=\"767\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/2/gallery/kandinsky-download-1681761366688.png\" data-size=\"773x773\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/2/gallery/kandinsky-download-1681761366688-thumbnail.png\" alt=\"\" width=\"768\" height=\"768\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/2/gallery/kandinsky-download-1681320431484.png\" data-size=\"767x767\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/2/gallery/kandinsky-download-1681320431484-thumbnail.png\" alt=\"\" width=\"767\" height=\"767\"></a></figure>\n</div></div>",
            "image": "https://cyberflat.ru/media/posts/2/photo_2023-04-12_20-43-30.jpg",
            "author": {
                "name": "Korchagin"
            },
            "tags": [
                   "cyberpunk",
                   "cats"
            ],
            "date_published": "2023-04-17T23:12:42+03:00",
            "date_modified": "2023-04-17T23:14:38+03:00"
        },
        {
            "id": "https://cyberflat.ru/testovaya-pervaya-stranica-na-publii/",
            "url": "https://cyberflat.ru/testovaya-pervaya-stranica-na-publii/",
            "title": "первая страница на Publii",
            "summary": "Положим сюда пару строк текста и пару картинок. Например, котов в стиле киберпанк. Добавим еще немного текста. и какую-нибудь ссылку: https://cyberflat.ru",
            "content_html": "<p>   Положим сюда пару строк текста и пару картинок.</p>\n<p>Например, котов в стиле киберпанк.</p>\n<div class=\"gallery-wrapper\"><div class=\"gallery\"  data-is-empty=\"false\" data-translation=\"Add images\" data-columns=\"3\">\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/1/gallery/kandinsky-download-1681321186790-2.png\" data-size=\"767x767\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/1/gallery/kandinsky-download-1681321186790-2-thumbnail.png\" alt=\"\" width=\"720\" height=\"720\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/1/gallery/kandinsky-download-1681320953380.png\" data-size=\"767x767\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/1/gallery/kandinsky-download-1681320953380-thumbnail.png\" alt=\"\" width=\"720\" height=\"720\"></a></figure>\n<figure class=\"gallery__item\"><a href=\"https://cyberflat.ru/media/posts/1/gallery/kandinsky-download-1681321053097.png\" data-size=\"767x767\"><img loading=\"lazy\" src=\"https://cyberflat.ru/media/posts/1/gallery/kandinsky-download-1681321053097-thumbnail.png\" alt=\"\" width=\"720\" height=\"720\"></a></figure>\n</div></div>\n<p>Добавим еще немного текста.</p>\n<p>и какую-нибудь ссылку: <a href=\"#INTERNAL_LINK#/post/NaN\">https://cyberflat.ru</a></p>",
            "image": "https://cyberflat.ru/media/posts/1/kandinsky-download-1681320876627.png",
            "author": {
                "name": "Korchagin"
            },
            "tags": [
                   "cyberpunk",
                   "cats"
            ],
            "date_published": "2023-04-17T22:03:37+03:00",
            "date_modified": "2023-04-18T06:59:43+03:00"
        }
    ]
}
