<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>поминутная статистика загрузки цпу за последние 255 минут - Cyberflat.ru</title><meta name="description" content="DECLARE @ts BIGINT; DECLARE @lastNmin TINYINT; SET @lastNmin =255; SELECT @ts = (SELECT cpu_ticks / ( cpu_ticks / ms_ticks ) FROM sys.dm_os_sys_info); SELECT TOP(@lastNmin) Dateadd(ms, -1 * ( @ts - [timestamp] ), Getdate())AS [EventTime], sqlprocessutilization AS [SQL Server Utilization], 100 - systemidle - sqlprocessutilization AS&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://cyberflat.ru/pominutnaya-statistika-zagruzki-cpu-za-poslednie-255-minut/"><link rel="alternate" type="application/atom+xml" href="https://cyberflat.ru/feed.xml"><link rel="alternate" type="application/json" href="https://cyberflat.ru/feed.json"><link rel="shortcut icon" href="https://cyberflat.ru/media/website/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://cyberflat.ru/assets/css/style.css?v=ab6e9ebd4e3c4a77d09f4ac4637e7041"><link rel="stylesheet" href="https://cyberflat.ru/assets/css/prism.css?v=14c06395eb91905351afe946cf6c9aa6"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://cyberflat.ru/pominutnaya-statistika-zagruzki-cpu-za-poslednie-255-minut/"},"headline":"поминутная статистика загрузки цпу за последние 255 минут","datePublished":"2023-04-30T17:27","dateModified":"2023-04-30T17:27","description":"DECLARE @ts BIGINT; DECLARE @lastNmin TINYINT; SET @lastNmin =255; SELECT @ts = (SELECT cpu_ticks / ( cpu_ticks / ms_ticks ) FROM sys.dm_os_sys_info); SELECT TOP(@lastNmin) Dateadd(ms, -1 * ( @ts - [timestamp] ), Getdate())AS [EventTime], sqlprocessutilization AS [SQL Server Utilization], 100 - systemidle - sqlprocessutilization AS&hellip;","author":{"@type":"Person","name":"Korchagin","url":"https://cyberflat.ru/authors/korchagin/"},"publisher":{"@type":"Organization","name":"Korchagin"}}</script><noscript><style>img[loading] {
					opacity: 1;
				}</style></noscript></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://cyberflat.ru/">Cyberflat.ru</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://cyberflat.ru/eshche-nemnogo-kotov-iz-ai/" target="_self">others_ai_cats</a></li><li><a href="https://cyberflat.ru/testovaya-pervaya-stranica-na-publii/" target="_self">first</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2023-04-30T17:28">апрель 30, 2023</time></div><div class="infobar__search"></div></div><main class="main"><article class="post"><header class="u-header post__header"><h1>поминутная статистика загрузки цпу за последние 255 минут</h1><div class="u-header__meta u-small"><div><a href="https://cyberflat.ru/authors/korchagin/" title="Korchagin">Korchagin</a> <time datetime="2023-04-30T17:27">апрель 30, 2023 </time><a href="https://cyberflat.ru/tags/sql/" class="u-tag u-tag--1">sql</a></div></div></header><div class="post__entry u-inner"><pre class="line-numbers language-html"><code>DECLARE @ts BIGINT;

DECLARE @lastNmin TINYINT;

SET @lastNmin =255;

SELECT @ts = (SELECT cpu_ticks / ( cpu_ticks / ms_ticks )

FROM sys.dm_os_sys_info);

SELECT TOP(@lastNmin) Dateadd(ms, -1 * ( @ts - [timestamp] ), Getdate())AS

[EventTime],

sqlprocessutilization AS

[SQL Server Utilization],

100 - systemidle - sqlprocessutilization AS

[Other Process CPU_Utilization],

systemidle AS

[System Idle]

FROM (SELECT

record.value('(./Record/@id)[1]', 'int') AS record_id,

record.value('(./Record/SchedulerMonitorEvent/SystemHealth/SystemIdle)[1]', 'int') AS [SystemIdle],

record.value('(./Record/SchedulerMonitorEvent/SystemHealth/ProcessUtilization)[1]', 'int')AS [SQLProcessUtilization],

[timestamp]

FROM (SELECT[timestamp],

CONVERT(XML, record) AS [record]

FROM sys.dm_os_ring_buffers

WHERE ring_buffer_type = N'RING_BUFFER_SCHEDULER_MONITOR'

AND record LIKE'%%')AS x)AS y

ORDER BY record_id DESC;</code></pre></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on апрель 30, 2023</div><div class="post__share"></div></aside><footer class="post__footer"><ul class="post__tag box"><li><a href="https://cyberflat.ru/tags/sql/" class="u-tag u-tag--1" title="sql">sql</a></li></ul><nav class="post__nav box"><div class="post__nav__prev"><a href="https://cyberflat.ru/maxdop/" class="post__nav__link" rel="prev"><div class="u-small">Previous Post<h5>MAXDOP</h5></div></a></div></nav></footer></article><div class="comments-area box"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div id="disqus_thread"></div><noscript>Please enable JS to use the comments form.</noscript><script type="text/javascript">var disqus_config = function () {
							this.page.url = 'https://cyberflat.ru/pominutnaya-statistika-zagruzki-cpu-za-poslednie-255-minut/';
							this.page.identifier = '6'; 
							this.language = 'ru_RU';
						};
						
						
				var disqus_element_to_check = document.getElementById('disqus_thread');

				if ('IntersectionObserver' in window) {
					var iObserver = new IntersectionObserver(
						(entries, observer) => {
							entries.forEach(entry => {
								if (entry.intersectionRatio >= 0.1) {
									(function () {
										var d = document, s = d.createElement('script');
										s.src = 'https://'+('cyberflat-ru').trim()+'.disqus.com/embed.js';
										s.setAttribute('data-timestamp', +new Date());
										(d.head || d.body).appendChild(s);
									})();
									observer.unobserve(entry.target);
								}
							});
						},
						{
							threshold: [0, 0.2, 0.5, 1]
						}
					);

					iObserver.observe(disqus_element_to_check);
				} else {
					(function () {
						var d = document, s = d.createElement('script');
						s.src = 'https://'+('cyberflat-ru').trim()+'.disqus.com/embed.js';
						s.setAttribute('data-timestamp', +new Date());
						(d.head || d.body).appendChild(s);
					})();
				}</script><script type="text/javascript"></script></div></div></div></main><div class="sidebar"><section class="box"><h3 class="box__title">Follow us</h3><div class="follow"><a href="www.instagram.com/zyberex/" class="instagram" aria-label="Instagram"><svg class="u-icon"><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#instagram"/></svg> Instagram </a><a href="https://www.youtube.com/@cyberflat_ru6118/videos" class="youtube" aria-label="Youtube"><svg class="u-icon"><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#youtube"/></svg> Youtube</a></div></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://cyberflat.ru/tags/cats/">cats</a> <span class="u-small">(2)</span></li><li><a href="https://cyberflat.ru/tags/cyberpunk/">cyberpunk</a> <span class="u-small">(2)</span></li><li><a href="https://cyberflat.ru/tags/hulu/">hulu</a> <span class="u-small">(1)</span></li><li><a href="https://cyberflat.ru/tags/powershell/">powershell</a> <span class="u-small">(1)</span></li><li><a href="https://cyberflat.ru/tags/serials/">serials</a> <span class="u-small">(1)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://cyberflat.ru/">Cyberflat.ru</a><nav><ul class="footer__nav"></ul></nav><div class="footer__follow"><a href="www.instagram.com/zyberex/" aria-label="Instagram"><svg><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#instagram"/></svg> </a><a href="https://www.youtube.com/@cyberflat_ru6118/videos" aria-label="Youtube"><svg><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright"><p>Powered by cyberflat.ru</p></div></footer></div><script defer="defer" src="https://cyberflat.ru/assets/js/prism.js?v=a5c8d05f71898532df7af6744e542bec"></script><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://cyberflat.ru/assets/js/scripts.min.js?v=ef33954c8f912e6c18ee116825aadc90"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>