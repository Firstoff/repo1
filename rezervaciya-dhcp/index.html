<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Резервация DHCP - Cyberflat.ru</title><meta name="description" content="Код PowerShell для обработки ошибок при проверке наличия резервации на адрес DHCP и запрашивать резервацию, если ее нет: # Получаем текущие настройки DHCP $dhcpServer = 'DHCP-Server' $scopeID = '192.168.1.0' $address = '192.168.1.10' $ReservationName = 'TestRes' $ReservationComment = 'Test comment' # Проверяем наличие резервации на адресе&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism-gray.css"><link rel="stylesheet" href="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://cyberflat.ru/rezervaciya-dhcp/"><link rel="alternate" type="application/atom+xml" href="https://cyberflat.ru/feed.xml" title="Cyberflat.ru - RSS"><link rel="alternate" type="application/json" href="https://cyberflat.ru/feed.json" title="Cyberflat.ru - JSON"><link rel="shortcut icon" href="https://cyberflat.ru/media/website/favicon.ico" type="image/x-icon"><link rel="preload" href="https://cyberflat.ru/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://cyberflat.ru/assets/dynamic/fonts/publicsans/publicsans-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://cyberflat.ru/assets/dynamic/fonts/oswald/oswald.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://cyberflat.ru/assets/css/style.css?v=28c3b990b50008da155e28f2458f2d00"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://cyberflat.ru/rezervaciya-dhcp/"},"headline":"Резервация DHCP","datePublished":"2023-04-30T18:28+03:00","dateModified":"2023-04-30T18:28+03:00","image":{"@type":"ImageObject","url":"https://cyberflat.ru/media/posts/10/kandinsky-download-1682868496215.png","height":767,"width":767},"description":"Код PowerShell для обработки ошибок при проверке наличия резервации на адрес DHCP и запрашивать резервацию, если ее нет: # Получаем текущие настройки DHCP $dhcpServer = 'DHCP-Server' $scopeID = '192.168.1.0' $address = '192.168.1.10' $ReservationName = 'TestRes' $ReservationComment = 'Test comment' # Проверяем наличие резервации на адресе&hellip;","author":{"@type":"Person","name":"Korchagin","url":"https://cyberflat.ru/authors/korchagin/"},"publisher":{"@type":"Organization","name":"Korchagin"}}</script><style>.u-tag--1c{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--agrofitness{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--cats{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--chatgpt{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--cyberpunk{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--dhcp{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--egypt{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--garden{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--gorky{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--holidays{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--home{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--hulu{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--maincoon{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--powershell{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--serials{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--sql{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--tram{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--turkey{--badge-bg:#84888E;--badge-txt:#FFFFFF;}.u-tag--tv{--badge-bg:#84888E;--badge-txt:#FFFFFF;}</style><noscript><style>img[loading]{opacity:1;}</style></noscript></head><body class="post-template"><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://cyberflat.ru/">Cyberflat.ru</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://cyberflat.ru/eshche-nemnogo-kotov-iz-ai/" target="_self">others_ai_cats</a></li><li><a href="https://cyberflat.ru/testovaya-pervaya-stranica-na-publii/" target="_self">first</a></li></ul></nav></div></header><div class="main-content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2025-09-22T22:36">22 сент. 2025</time></div><div class="infobar__search"></div></div><main class="main post"><article class="content"><figure class="content__featured-image"><img src="https://cyberflat.ru/media/posts/10/kandinsky-download-1682868496215.png" srcset="https://cyberflat.ru/media/posts/10/responsive/kandinsky-download-1682868496215-xs.png 300w, https://cyberflat.ru/media/posts/10/responsive/kandinsky-download-1682868496215-sm.png 480w, https://cyberflat.ru/media/posts/10/responsive/kandinsky-download-1682868496215-md.png 768w, https://cyberflat.ru/media/posts/10/responsive/kandinsky-download-1682868496215-lg.png 1024w, https://cyberflat.ru/media/posts/10/responsive/kandinsky-download-1682868496215-xl.png 1360w, https://cyberflat.ru/media/posts/10/responsive/kandinsky-download-1682868496215-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="767" width="767" alt=""></figure><header class="u-header content__header"><h1>Резервация DHCP</h1><div class="u-header__meta u-small"><div><a href="https://cyberflat.ru/authors/korchagin/" title="Korchagin">Korchagin</a> <time datetime="2023-04-30T18:28">30 апр. 2023 </time><a href="https://cyberflat.ru/tags/dhcp/" class="u-tag u-tag--dhcp">dhcp</a></div></div></header><div class="content__entry u-inner"><p>Код PowerShell для обработки ошибок при проверке наличия резервации на адрес DHCP и запрашивать резервацию, если ее нет:</p><pre class="line-numbers language-visual-basic"><code># Получаем текущие настройки DHCP
$dhcpServer = "DHCP-Server"
$scopeID = "192.168.1.0"
$address = "192.168.1.10"
$ReservationName = "TestRes"
$ReservationComment = "Test comment"

# Проверяем наличие резервации на адресе
$Reservation = Get-DhcpServerv4Reservation -ComputerName $dhcpServer -ScopeId $scopeID -IPAddress $address -ErrorAction SilentlyContinue

if($Reservation -eq $null){
   # Если резервации на адресе нет, то запрашиваем у пользователя резервировать ли его
   $result = Read-Host "Резервировать ли адрес $address? (Да/Нет)"
   if($result.ToLower() -eq "да"){
       # Если пользователь согласился на резервацию, тогда создаем новую резервацию
       Add-DhcpServerv4Reservation -ComputerName $dhcpServer -ScopeId $scopeID -IPAddress $address -ClientIdentifier '00-11-22-33-44-55' -Name $ReservationName -Comment $ReservationComment
       Write-Host "Резервация на адрес $address успешно создана"
   }else{
       Write-Host "Резервация на адрес $address отменена пользователем"
   }
}else{
   # Если резервация на адресе уже есть, тогда выводим сообщение об этом
   Write-Host "Резервация на адрес $address уже существует"
}</code></pre><p>Этот код проверяет наличие резервации на адресе DHCP, запрашивает подтверждение на резервацию, если ее нет, и создает новую резервацию в случае подтверждения. Если резервация уже существует, то скрипт просто выводит сообщение об этом. Учитывайте, что в этом коде некоторые переменные могут отличаться от Ваших текущих настроек DHCP и функций резервации.</p></div><aside class="content__aside"><div class="content__last-updated u-small">This article was updated on 30 апр. 2023</div><div class="content__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fcyberflat.ru%2Frezervaciya-dhcp%2F" class="js-share facebook" title="Share with Facebook" rel="nofollow noopener noreferrer" aria-label="Share with Facebook"><svg class="u-icon"><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fcyberflat.ru%2Frezervaciya-dhcp%2F&amp;media=https%3A%2F%2Fcyberflat.ru%2Fmedia%2Fposts%2F10%2Fkandinsky-download-1682868496215.png&amp;description=%D0%A0%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%B0%D1%86%D0%B8%D1%8F%20DHCP" class="js-share pinterest" title="Share with Pinterest" rel="nofollow noopener noreferrer" aria-label="Share with Pinterest"><svg class="u-icon"><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#pinterest"/></svg> </a><a href="https://wa.me/?text=%D0%A0%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%B0%D1%86%D0%B8%D1%8F%20DHCP https%3A%2F%2Fcyberflat.ru%2Frezervaciya-dhcp%2F" class="js-share whatsapp" rel="nofollow noopener noreferrer" title="Share with WhatsApp" aria-label="Share with WhatsApp"><svg class="u-icon"><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#whatsapp"/></svg></a></div></aside><footer class="content__footer"><ul class="content__tag box"><li><a href="https://cyberflat.ru/tags/dhcp/" class="u-tag u-tag--dhcp" title="dhcp">dhcp</a></li><li><a href="https://cyberflat.ru/tags/powershell/" class="u-tag u-tag--powershell" title="powershell">powershell</a></li></ul><nav class="content__nav box"><div class="content__nav__prev"><a href="https://cyberflat.ru/proverka-blokirovok-na-servere/" class="content__nav__link" rel="prev"><img src="https://cyberflat.ru/media/posts/8/responsive/kandinsky-download-1682866221320-xs.png" loading="lazy" alt="" height="767" width="767"><div class="u-small">Previous Post<h5>Проверка блокировок на сервере</h5></div></a></div><div class="content__nav__next"><a href="https://cyberflat.ru/kotiki-ot-kandinskogo/" class="content__nav__link" rel="next"><div class="u-small">Next Post<h5>Котики от Кандинского</h5></div><img src="https://cyberflat.ru/media/posts/11/responsive/kandinsky-download-1681320953380-xs.png" loading="lazy" alt="" height="767" width="767"></a></div></nav></footer></article><div class="comments-area box"></div></main><div class="sidebar"><section class="box"><h3 class="box__title">Follow us</h3><div class="follow"><a href="https://www.youtube.com/@cyberflat_ru6118/videos" class="youtube" aria-label="Youtube"><svg class="u-icon"><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#youtube"/></svg> Youtube</a></div></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://cyberflat.ru/tags/1c/">1C</a> <span class="u-small">(1)</span></li><li><a href="https://cyberflat.ru/tags/agrofitness/">agrofitness</a> <span class="u-small">(4)</span></li><li><a href="https://cyberflat.ru/tags/cats/">cats</a> <span class="u-small">(12)</span></li><li><a href="https://cyberflat.ru/tags/chatgpt/">chatgpt</a> <span class="u-small">(1)</span></li><li><a href="https://cyberflat.ru/tags/cyberpunk/">cyberpunk</a> <span class="u-small">(3)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://cyberflat.ru/">Cyberflat.ru</a><nav><ul class="footer__nav"></ul></nav><div class="footer__follow"><a href="https://www.youtube.com/@cyberflat_ru6118/videos" aria-label="Youtube"><svg><use xlink:href="https://cyberflat.ru/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright"><p>Powered by cyberflat.ru</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://cyberflat.ru/assets/js/scripts.min.js?v=18a65c58aef57c0287e0f0609f3389a9"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script><script defer="defer" src="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://cyberflat.ru/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script><script defer="defer" src="https://cyberflat.ru/media/plugins/syntaxHighlighter/prism-autolinker.min.js"></script></body></html>